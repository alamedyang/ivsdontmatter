<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>IVs Don't Matter</title>
	<link rel="stylesheet" href="./styles.css" />
</head>
<body>
	<h1>IVs Don't Matter</h1>
	<div id="stat-explorer">
		<h2>
			<span>Pokemon</span>
			<button
				class="plus"
				@click="addPokemon"
			>
				+
			</button>
		</h2>
		<div>
			<div class="pokemon-list">
				<div
					v-for="(pokemon, index) in pokemonList"
					class="pokemon-graph"
				>
					<h3>
						<span>{{pokemon.name}}</span>
						<span class="hint">(CP: {{calculateCP(pokemon)}})</span>
						<label class="controls-checkbox hint">
							<span>MORE:</span>
							<input
								type="checkbox"
								v-model="pokemon.expanded"
							/>
						</label>
						<label class="controls-checkbox hint">
							<span>SHADOW:</span>
							<input
								type="checkbox"
								v-model="pokemon.shadow"
							/>
						</label>
						<button
							class="minus"
							@click="removePokemon(index)"
						>
							x
						</button>
					</h3>
					<div class="stat-list">
						<stat-bar
							v-for="(stat, propertyName, index) in pokemon.ivs"
							:key="propertyName"
							:label="propertyName"
							:stat-name="propertyName"
							:pokemon="pokemon"
						></stat-bar>
					</div>
					<div
						v-if="pokemon.expanded"
						class="controls"
					>
						<div class="container_section">
							<div class="inputtydoo">
								<label>
									<span>
										<span>Pokemon:</span>
									</span>
									<select
										v-model="pokemon.name"
									>
										<option
											v-for="(pokemon, pokemonName, index) in pokemonMap"
											:key="pokemonName"
										>{{pokemonName}}</option>
									</select>
								</label>
							</div>
						</div>
						<div class="container_section">
							<div class="inputtydoo">
								<label>
									<span>
										<span>Level: {{pokemon.level}}</span>
										<span class="hint">(CPM: {{lookupCPMFromLevel(pokemon.level)}})</span>
									</span>
									<input
										type="range"
										min="1"
										max="51"
										step="0.5"
										v-model="pokemon.level"
									/>
								</label>
							</div>
							<div>
								<div>
									<span>Common levels:</span>
									<span class="hint"> (weather boost:</span>
									<input
										type="checkbox"
										v-model="isWeatherBoosted"
									/>
									<span class="hint">)</span>
								</div>
								<button
									v-for="(value, propertyName, index) in presetLevels"
									@click="pokemon.level=value"
									:key="propertyName"
									class="preset-button"
								>{{propertyName}}</button>
							</div>
						</div>
						<div class="container_section">
							<label>
								IVs:
							</label>
							<div
							v-for="(iv, key, index) in pokemon.ivs"
							>
								<svg
									viewBox="0.25 -0.75 23 1.75"
									xmlns="http://www.w3.org/2000/svg"
									class="iv_bar_width"
								>
									<defs>
										<g id="iv_slider_base">
											<line name="IV slider"
												class="iv_input_gray"
												x1="1"
												y1="0"
												x2="15"
												y2="0"
												stroke-linecap="round"
											/>
										</g>
										<g id="iv_input_dividers">
											<line name="divider"
												class="iv_input_divider"
												x1="5.55"
												y1="-0.625"
												x2="5.55"
												y2="0.625"
											/>
											<line name="divider"
												class="iv_input_divider"
												x1="10.55"
												y1="-0.625"
												x2="10.55"
												y2="0.625"
											/>
										</g>
									</defs>
									<g id="iv_slider_base">
										<line name="IV slider"
											class="iv_input_white_bg"
											x1="1"
											y1="0"
											x2="15"
											y2="0"
											stroke-linecap="round"
										/>
									</g>
								<use  href="#iv_slider_base"/>
									<g name="iv input bar"
										v-if="iv"
									>
										<line name="orange iv bar"
											:class="{
												iv_input_orange: iv < 15,
												iv_input_red: iv >= 15
											}"
											x1="1"
											y1="0"
											:x2="iv"
											y2="0"
											stroke-linecap="round"
										/>
									</g>
									<use  href="#iv_input_dividers"/>
									<text
										class="iv_input_label"
										x="16.25"
										y="0.32"
									>
										{{key}} IV: {{iv}}
									</text>
								</svg>
								<input
									type="range"
									min="0"
									max="15"
									step="1"
									v-model.number="pokemon.ivs[key]"
								/>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/x-template" id="stat-bar">
		
		<div
			class="stat-bar"
		>
			<svg
			:viewBox="
				'0 0 ' + scale + ' ' + ivBarHeight
			"
			xmlns="http://www.w3.org/2000/svg"	
			>
				<g name="stat bar range">
					<rect name="max gray bar"
						class="stats_full_range"
						:width="
							scale
						"
						:height="
							ivBarHeight
						"
						x="0"
						y="0"
					/>
				</g>
				<g name="shadow bonus (attack)"
					v-if="statName === 'attack' && pokemon.shadow"
					>
					<rect name="pink bar (shadow bonus)"
						class="stats_iv_max_main"
						:width="
							(((baseStat + 15) * cpm) * 1.2)
						"
						:height="
							ivBarHeight
						"
						x="0"
						y="0"
					/>
					<rect name="red bar (shadow bonus)"
						class="stats_iv_main"
						:width="
							(((baseStat + iv) * cpm) * 1.2)
						"
						:height="
							ivBarHeight
						"
						x="0"
						y="0"
					/>
					<rect name="blue bar (shadow bonus)"
						class="stats_base_main"
						:width="
							(((baseStat) * cpm) * 1.2)
						"
						:height="
							ivBarHeight
						"
						x="0"
						y="0"
					/>
				</g>
				<g name="total stat bar">
					<rect name="pink bar"
						:class="overlapOrMainPinkClasses"
						:width="
							((baseStat + 15) * cpm)
						"
						:height="
							ivBarHeight
						"
						x="0"
						y="0"
					/>
					<rect name="red bar"
						:class="overlapOrMainRedClasses"
						:width="
							((baseStat + iv) * cpm)
						"
						:height="
							ivBarHeight
						"
						x="0"
						y="0"
					/>
					<rect name="blue bar"
					:class="overlapOrMainBlueClasses"
					:width="
							((baseStat) * cpm)
						"
						:height="
							ivBarHeight
						"
						x="0"
						y="0"
					/>
				</g>
				<g name="shadow penalty (defense)"
				v-if="statName === 'defense' && pokemon.shadow"
			>
				<rect name="pink bar (shadow penalty)"
					class="stats_iv_max_main"
					:width="
						(((baseStat + 15) * cpm) * (5/6))
					"
					:height="
						ivBarHeight
					"
					x="0"
					y="0"
				/>
				<rect name="red bar (shadow penalty)"
					class="stats_iv_main"
					:width="
						(((baseStat + iv) * cpm) * (5/6))
					"
					:height="
						ivBarHeight
					"
					x="0"
					y="0"
				/>
				<rect name="blue bar (shadow penalty)"
					class="stats_base_main"
					:width="
						(((baseStat) * cpm) * (5/6))
					"
					:height="
						ivBarHeight
					"
					x="0"
					y="0"
				/>
			</g>
			</svg>
		</div>
	</script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
	<script src="./data.js"></script>
	<script src="./app.js"></script>
</body>
</html>
